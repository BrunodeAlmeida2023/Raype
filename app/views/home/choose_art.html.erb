<% content_for :body_class, "orange-bg" %>

<header class="home-header">
  <div class="home-header-left">
    <div class="home-header-logo">
      <img src="/Logo.png" alt="Raype Logo" class="header-logo-img">
    </div>
    <h1>RAYPE</h1>
  </div>
  <nav class="home-nav">
    <%= link_to "Voltar", root_path, class: "home-nav-btn" %>
  </nav>
</header>

<div class="content-wrap">
  <section class="home-services">
    <h1 class="home-services-title">Escolha sua Arte</h1>

    <%# Dados das artes para o JavaScript - de forma segura via helper %>
    <div id="saved-art-data"
         data-art-quantity="<%= @outdoor&.art_quantity || 0 %>"
         data-saved-arts="<%= saved_art_data_json(@outdoor).html_safe %>"
         class="hidden-data">
    </div>

    <%= form_with url: post_choose_art_home_path, method: :post, multipart: true, class: "home-form-container choose-art-form", id: "choose-art-form" do |f| %>
      <div class="choose-art-layout">
        <div class="choose-art-left">
          <div class="home-form-group art-quantity-group">
            <%= f.label :art_quantity, "Quantas artes você tem?", class: "home-form-label art-quantity-label" %>
            <%= f.select :art_quantity,
                art_quantity_options(@outdoor&.art_quantity),
                {},
                { class: "home-form-select art-quantity-select", id: "art_quantity" }
            %>
          </div>

          <div id="upload-fields-container" class="upload-fields-grid">
            <!-- Campos de upload serão inseridos dinamicamente via JS -->
          </div>
        </div>

        <div class="choose-art-right">
          <!-- Preview do Outdoor Triedo -->
          <% if show_outdoor_preview?(@outdoor) %>
            <div id="outdoor-preview-container" class="outdoor-preview-container">
              <h3 class="preview-title">Prévia do seu Outdoor</h3>
              <div class="triedo-wrapper">
                <div id="triedo-display" class="triedo-display">
                  <div class="triedo-placeholder">
                    <p>Faça upload das suas artes para visualizar</p>
                  </div>
                </div>
                <div class="triedo-structure">
                  <div class="triedo-pole"></div>
                  <div class="triedo-base"></div>
                </div>
              </div>
              <p class="preview-hint">* As imagens rotacionam automaticamente simulando um outdoor triedo</p>
            </div>
          <% end %>
        </div>

        <div class="home-form-actions choose-art-actions">
          <%= f.submit "Enviar Arte", class: "home-submit-btn" %>
        </div>
      </div>
    <% end %>
  </section>
</div>


